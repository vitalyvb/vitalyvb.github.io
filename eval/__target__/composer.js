'use strict';import{AssertionError,AttributeError,BaseException,DeprecationWarning,Exception,IndexError,IterableError,KeyError,NotImplementedError,RuntimeWarning,StopIteration,UserWarning,ValueError,Warning,__JsIterator__,__PyIterator__,__Terminal__,__add__,__and__,__call__,__class__,__envir__,__eq__,__floordiv__,__ge__,__get__,__getcm__,__getitem__,__getslice__,__getsm__,__gt__,__i__,__iadd__,__iand__,__idiv__,__ijsmod__,__ilshift__,__imatmul__,__imod__,__imul__,__in__,__init__,__ior__,__ipow__,
__irshift__,__isub__,__ixor__,__jsUsePyNext__,__jsmod__,__k__,__kwargtrans__,__le__,__lshift__,__lt__,__matmul__,__mergefields__,__mergekwargtrans__,__mod__,__mul__,__ne__,__neg__,__nest__,__or__,__pow__,__pragma__,__proxy__,__pyUseJsNext__,__rshift__,__setitem__,__setproperty__,__setslice__,__sort__,__specialattrib__,__sub__,__super__,__t__,__terminal__,__truediv__,__withblock__,__xor__,abs,all,any,assert,bool,bytearray,bytes,callable,chr,copy,deepcopy,delattr,dict,dir,divmod,enumerate,filter,float,
getattr,hasattr,input,int,isinstance,issubclass,len,list,map,max,min,object,ord,pow,print,property,py_TypeError,py_iter,py_metatype,py_next,py_reversed,py_typeof,range,repr,round,set,setattr,sorted,str,sum,tuple,zip}from"./org.transcrypt.__runtime__.js";import{CollectionNode,MappingNode,Node,ScalarNode,SequenceNode}from"./nodes.js";import{AliasEvent,CollectionEndEvent,CollectionStartEvent,DocumentEndEvent,DocumentStartEvent,Event,MappingEndEvent,MappingStartEvent,NodeEvent,ScalarEvent,SequenceEndEvent,
SequenceStartEvent,StreamEndEvent,StreamStartEvent}from"./events.js";import{MarkedYAMLError}from"./error.js";var __name__="composer";export var __all__=["Composer","ComposerError"];export var ComposerError=__class__("ComposerError",[MarkedYAMLError],{__module__:__name__});export var Composer=__class__("Composer",[object],{__module__:__name__,get __init__(){return __get__(this,function(self){self.anchors=dict({})})},get check_node(){return __get__(this,function(self){if(self.check_event(StreamStartEvent))self.get_event();
return!self.check_event(StreamEndEvent)})},get get_node(){return __get__(this,function(self){if(!self.check_event(StreamEndEvent))return self.compose_document()})},get get_single_node(){return __get__(this,function(self){self.get_event();var document=null;if(!self.check_event(StreamEndEvent))var document=self.compose_document();if(!self.check_event(StreamEndEvent)){var event=self.get_event();var __except0__=ComposerError("expected a single document in the stream",document.start_mark,"but found another document",
event.start_mark);__except0__.__cause__=null;throw __except0__;}self.get_event();return document})},get compose_document(){return __get__(this,function(self){self.get_event();var node=self.compose_node(null,null);self.get_event();self.anchors=dict({});return node})},get compose_node(){return __get__(this,function(self,parent,index){if(self.check_event(AliasEvent)){var event=self.get_event();var anchor=event.anchor;if(!__in__(anchor,self.anchors)){var __except0__=ComposerError(null,null,__mod__("found undefined alias %r",
anchor),event.start_mark);__except0__.__cause__=null;throw __except0__;}return self.anchors[anchor]}var event=self.peek_event();var anchor=event.anchor;if(anchor!==null)if(__in__(anchor,self.anchors)){var __except0__=ComposerError(__mod__("found duplicate anchor %r; first occurence",anchor),self.anchors[anchor].start_mark,"second occurence",event.start_mark);__except0__.__cause__=null;throw __except0__;}self.descend_resolver(parent,index);if(self.check_event(ScalarEvent))var node=self.compose_scalar_node(anchor);
else if(self.check_event(SequenceStartEvent))var node=self.compose_sequence_node(anchor);else if(self.check_event(MappingStartEvent))var node=self.compose_mapping_node(anchor);self.ascend_resolver();return node})},get compose_scalar_node(){return __get__(this,function(self,anchor){var event=self.get_event();var tag=event.tag;if(tag===null||tag=="!")var tag=self.resolve(ScalarNode,event.value,event.implicit);var node=ScalarNode(tag,event.value,event.start_mark,event.end_mark,event.style);if(anchor!==
null)self.anchors[anchor]=node;return node})},get compose_sequence_node(){return __get__(this,function(self,anchor){var start_event=self.get_event();var tag=start_event.tag;if(tag===null||tag=="!")var tag=self.resolve(SequenceNode,null,start_event.implicit);var node=SequenceNode(tag,[],start_event.start_mark,null,__kwargtrans__({flow_style:start_event.flow_style}));if(anchor!==null)self.anchors[anchor]=node;var index=0;while(!self.check_event(SequenceEndEvent)){node.value.append(self.compose_node(node,
index));index++}var end_event=self.get_event();node.end_mark=end_event.end_mark;return node})},get compose_mapping_node(){return __get__(this,function(self,anchor){var start_event=self.get_event();var tag=start_event.tag;if(tag===null||tag=="!")var tag=self.resolve(MappingNode,null,start_event.implicit);var node=MappingNode(tag,[],start_event.start_mark,null,__kwargtrans__({flow_style:start_event.flow_style}));if(anchor!==null)self.anchors[anchor]=node;while(!self.check_event(MappingEndEvent)){var item_key=
self.compose_node(node,null);var item_value=self.compose_node(node,item_key);node.value.append(tuple([item_key,item_value]))}var end_event=self.get_event();node.end_mark=end_event.end_mark;return node})}});

//# sourceMappingURL=composer.map